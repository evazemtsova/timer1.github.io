<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quantum Timer — 1 марта и 23 апреля 2026 (MSK)</title>
  <meta name="description" content="Футуристический двойной таймер с нейроморфным дизайном и квантовой анимацией. Считает до 1 марта 2026 и 23 апреля 2026 по московскому времени." />
  
  <!-- Манропе — современный гротеск -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* ====== CSS RESET ====== */
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{font-size:16px;-webkit-text-size-adjust:100%}
    body{min-height:100vh;line-height:1.5;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}
    img,svg{display:block;max-width:100%}
    button,input{font:inherit;background:none;border:none;}

    /* ====== THEME TOKENS ====== */
    :root {
      --bg-1: #0a0a0d;              /* глубокий космический фон */
      --bg-2: rgba(22, 22, 30, 0.7);/* нейроморфные поверхности */
      --fg-1: #f0f0ff;              /* голубоватый светлый текст */
      --fg-2: #a0a0cc;              /* вторичный текст с фиолетовым оттенком */
      --accent-a: #9d6cff;          /* неоновый фиолетовый */
      --accent-b: #00e6cc;          /* квантовый бирюзовый */
      --glow-a: 0 0 25px rgba(157, 108, 255, 0.4);
      --glow-b: 0 0 25px rgba(0, 230, 204, 0.4);
      --danger: #ff4d70;
      --radius-lg: 1.75rem;
      --radius-sm: .9rem;
      --blur: 32px;
      --border-color: rgba(255,255,255,.12);
      --font-sans: "Manrope", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, sans-serif;
      --fs-xxl: clamp(3rem, 9vw, 6.5rem);
      --fs-xl: clamp(1.75rem, 5vw, 3.25rem);
      --fs-lg: clamp(1.25rem, 4vw, 2rem);
      --fs-md: 1rem;
      --fs-sm: .875rem;
      --transition: .45s cubic-bezier(.4,0,.2,1);
    }

    .light {
      --bg-1: #f7f9ff;
      --bg-2: rgba(255,255,255,.8);
      --fg-1: #0d0d20;
      --fg-2: #4a4a6d;
      --border-color: rgba(0,0,0,.08);
      --glow-a: 0 0 15px rgba(157, 108, 255, 0.2);
      --glow-b: 0 0 15px rgba(0, 230, 204, 0.2);
    }

    body {
      font-family: var(--font-sans);
      color: var(--fg-1);
      background: var(--bg-1);
      position: relative;
      overflow-x: hidden;
      transition: background var(--transition), color var(--transition);
    }

    /* ====== КВАНТОВЫЙ ФОН ====== */
    .quantum-bg {
      position: fixed;
      inset: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(157, 108, 255, 0.3), transparent 55%),
        radial-gradient(circle at 80% 30%, rgba(0, 230, 204, 0.25), transparent 60%),
        radial-gradient(circle at 50% 80%, rgba(255, 255, 255, 0.1), transparent 60%);
      filter: blur(100px);
      opacity: .8;
      animation: floatBg 20s infinite alternate ease-in-out;
      pointer-events: none;
      z-index: 0;
    }
    
    .particles {
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 1000 1000' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E");
      opacity: .2;
      z-index: 1;
    }
    
    @keyframes floatBg {
      0% { transform: translate3d(-3%, -2%, 0) scale(1); }
      100% { transform: translate3d(3%, 3%, 0) scale(1.05); }
    }

    /* Нейроморфные элементы */
    header, footer {
      position: relative;
      z-index: 10;
      padding: 1.2rem clamp(1.5rem, 5vw, 3rem);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
      backdrop-filter: blur(var(--blur));
      background: color-mix(in srgb, var(--bg-1) 85%, transparent);
      border-bottom: 1px solid var(--border-color);
    }

    header {
      position: sticky;
      top: 0;
    }

    main {
      position: relative;
      z-index: 5;
      width: 100%;
      max-width: 1400px;
      margin: 0 auto;
      padding: clamp(2rem, 5vw, 4rem) clamp(1.5rem, 5vw, 3rem) 5rem;
    }

    .title {
      font-size: var(--fs-lg);
      font-weight: 700;
      letter-spacing: -0.015em;
      background: linear-gradient(90deg, var(--accent-a), var(--accent-b));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      display: inline-block;
    }

    .theme-toggle {
      cursor: pointer;
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg-2);
      border: 1px solid var(--border-color);
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
      transition: all var(--transition);
      position: relative;
      overflow: hidden;
    }
    
    .theme-toggle svg {
      width: 1.5rem;
      height: 1.5rem;
      transition: transform 0.4s ease;
    }
    
    .theme-toggle:hover {
      transform: translateY(-2px) rotate(8deg);
      box-shadow: 0 6px 25px rgba(0,0,0,0.15);
    }
    
    .theme-toggle::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(120deg, 
        rgba(255,255,255,0.2), 
        rgba(255,255,255,0) 60%);
      opacity: 0;
      transition: opacity var(--transition);
    }
    
    .theme-toggle:hover::before {
      opacity: 0.3;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(100%, 540px), 1fr));
      gap: clamp(1.5rem, 4vw, 2.5rem);
    }

    .card {
      position: relative;
      backdrop-filter: blur(var(--blur));
      background: color-mix(in srgb, var(--bg-2) 92%, transparent);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      padding: clamp(1.5rem, 4vw, 3rem);
      box-shadow: 
        0 0 0 1px rgba(255,255,255,.03), 
        0 25px 50px -15px rgba(0,0,0,0.4);
      overflow: hidden;
      transition: all var(--transition);
      z-index: 2;
    }
    
    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, rgba(255,255,255,.08), rgba(255,255,255,0) 70%);
      opacity: .3;
      pointer-events: none;
      z-index: -1;
    }
    
    .card::after {
      content: "";
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, var(--accent-a), var(--accent-b));
      border-radius: var(--radius-lg);
      z-index: -2;
      opacity: 0;
      transition: opacity var(--transition);
    }
    
    .card:hover {
      border-color: transparent;
      transform: translateY(-5px);
      box-shadow: 0 30px 60px -20px rgba(0,0,0,0.35);
    }
    
    .card:hover::after {
      opacity: 0.7;
    }

    .card h2 {
      font-size: var(--fs-lg);
      margin-bottom: 1rem;
      font-weight: 700;
      letter-spacing: -0.015em;
    }
    
    .card h3 {
      font-size: var(--fs-sm);
      color: var(--fg-2);
      margin-bottom: 1.5rem;
      font-weight: 500;
    }

    /* ==== ЦИФРОВОЙ БЛОК ==== */
    .timer-value {
      font-variant-numeric: tabular-nums;
      font-size: var(--fs-xxl);
      font-weight: 800;
      letter-spacing: -0.03em;
      display: flex;
      flex-wrap: wrap;
      gap: .8rem 1.5rem;
      line-height: 1;
      margin: 1.5rem 0;
    }
    
    .timer-value span {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      min-width: 5.5ch;
      perspective: 1000px;
      position: relative;
    }
    
    .timer-value .num {
      position: relative;
      transform: translateZ(0);
      transition: transform .6s cubic-bezier(0.34, 1.56, 0.64, 1);
      text-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .accent-a .num {
      background: linear-gradient(180deg, #d0b8ff, var(--accent-a));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .accent-b .num {
      background: linear-gradient(180deg, #7cffe8, var(--accent-b));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .timer-value span .label {
      font-size: var(--fs-sm);
      color: var(--fg-2);
      margin-top: .8rem;
      font-weight: 500;
      letter-spacing: -0.01em;
    }

    /* ==== Прогресс ==== */
    .progress-wrap { 
      margin-top: 2.5rem; 
      display: flex; 
      flex-direction: column; 
      gap: 1.5rem; 
    }
    
    .progress-row {
      display: grid;
      grid-template-columns: minmax(14ch, 260px) 1fr 5ch;
      gap: 1.5rem;
      align-items: center;
    }
    
    .progress-label { 
      font-size: var(--fs-sm); 
      color: var(--fg-2);
      font-weight: 500;
    }
    
    .progressbar {
      width: 100%; 
      height: 1rem; 
      border-radius: 999px; 
      position: relative;
      background: color-mix(in srgb, var(--fg-2) 10%, transparent);
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .progressbar > div {
      height: 100%;
      transition: width 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
      position: relative;
    }
    
    .progress-a { 
      background: linear-gradient(90deg, var(--accent-a), #c5a6ff);
      box-shadow: var(--glow-a);
    }
    
    .progress-b { 
      background: linear-gradient(90deg, var(--accent-b), #5cffea);
      box-shadow: var(--glow-b);
    }
    
    .progress-percent { 
      font-size: var(--fs-sm); 
      color: var(--fg-1);
      font-weight: 600;
      text-align: right;
      min-width: 4ch;
    }

    /* Настройки */
    .settings {
      display: flex; 
      flex-wrap: wrap; 
      gap: 1.5rem; 
      margin-top: 1.5rem; 
      font-size: var(--fs-sm); 
      color: var(--fg-2);
    }
    
    .settings label { 
      cursor: pointer; 
      display: flex; 
      align-items: center; 
      gap: .8rem; 
      padding: .8rem 1.2rem;
      background: color-mix(in srgb, var(--bg-2) 80%, transparent);
      border-radius: var(--radius-sm);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border-color);
      transition: all var(--transition);
    }
    
    .settings label:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      border-color: var(--accent-a);
    }
    
    .settings input[type="checkbox"] {
      width: 1.2rem; 
      height: 1.2rem; 
      border-radius: .3rem; 
      border: 1px solid var(--border-color);
      background: var(--bg-2);
      appearance: none; 
      position: relative; 
      transition: all var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .settings input[type="checkbox"]::before {
      content: "";
      position: absolute;
      width: 100%;
      height: 100%;
      background: var(--accent-a);
      border-radius: .2rem;
      transform: scale(0);
      transition: transform .3s ease;
    }
    
    .settings input[type="checkbox"]:checked::before {
      transform: scale(1);
    }
    
    .settings input[type="checkbox"]:checked::after {
      content: ""; 
      position: absolute; 
      width: .4rem;
      height: .8rem;
      border: solid white;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg) scale(1);
      margin-top: -1px;
      z-index: 1;
    }

    footer {
      border-top: 1px solid var(--border-color);
      font-size: var(--fs-sm);
      color: var(--fg-2);
      justify-content: center;
      flex-wrap: wrap;
      text-align: center;
    }
    
    footer > div {
      width: 100%;
    }

    /* ===== Accessibility helpers ===== */
    .visually-hidden {
      position: absolute !important; 
      height: 1px; 
      width: 1px; 
      overflow: hidden; 
      clip: rect(1px,1px,1px,1px); 
      white-space: nowrap;
    }

    /* ===== Анимации ===== */
    .fade-in { 
      opacity: 0; 
      transform: translateY(10px); 
      animation: fadeIn .8s var(--transition) forwards; 
    }
    
    @keyframes fadeIn { 
      to { 
        opacity: 1; 
        transform: none; 
      } 
    }
    
    .pulse {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 0.8; }
      50% { opacity: 1; }
      100% { opacity: 0.8; }
    }
  </style>
</head>
<body>
  <div class="quantum-bg"></div>
  <div class="particles"></div>

  <header>
    <div class="title">Quantum Timer</div>
    <button id="themeToggle" class="theme-toggle" aria-label="Переключить тему">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M12 4V2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M12 20V22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M5.63605 5.63605L4.22183 4.22183" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M18.364 18.364L19.7782 19.7782" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M4 12H2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M20 12H22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M5.63605 18.364L4.22183 19.7782" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M18.364 5.63605L19.7782 4.22183" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </header>

  <main>
    <noscript>
      <p style="color:var(--danger); padding: 1.5rem; background: rgba(255,77,112,0.1); border-radius: var(--radius-sm); text-align: center;">
        <strong>JavaScript отключён.</strong> Таймеры покажут статическое время. Включите JS для живого обновления.
      </p>
    </noscript>

    <!-- Живой регион для скринридеров -->
    <div id="sr-live" class="visually-hidden" aria-live="polite"></div>

    <section class="grid fade-in" id="timers">
      <article class="card" id="timerA" aria-labelledby="timerA-title">
        <h2 id="timerA-title">До 1 марта 2026 (MSK)</h2>
        <div class="timer-value accent-a" data-timer="A"></div>
      </article>

      <article class="card" id="timerB" aria-labelledby="timerB-title">
        <h2 id="timerB-title">До 23 апреля 2026 (MSK)</h2>
        <div class="timer-value accent-b" data-timer="B"></div>
      </article>
    </section>

    <section class="card fade-in" id="statusBoard" aria-labelledby="statusBoard-title" style="margin-top: clamp(2rem,5vw,3.5rem);">
      <h2 id="statusBoard-title">Прогресс времени</h2>
      <h3>От 23 апреля 2025 (MSK) до каждой даты</h3>

      <div class="progress-wrap">
        <div class="progress-row">
          <div class="progress-label">К 1 марта 2026</div>
          <div class="progressbar"><div class="progress-a" style="width:0%" data-progress="A"></div></div>
          <div class="progress-percent" data-progress-pct="A">0%</div>
        </div>
        <div class="progress-row">
          <div class="progress-label">К 23 апреля 2026</div>
          <div class="progressbar"><div class="progress-b" style="width:0%" data-progress="B"></div></div>
          <div class="progress-percent" data-progress-pct="B">0%</div>
        </div>
      </div>
    </section>

    <section class="card fade-in" id="settings" aria-labelledby="settings-title" style="margin-top: clamp(2rem,5vw,3.5rem);">
      <h2 id="settings-title">Настройки отображения</h2>
      <div class="settings">
        <label><input type="checkbox" id="showMonths" checked /> Показывать месяцы</label>
        <label><input type="checkbox" id="showSeconds" checked /> Показывать секунды</label>
        <label><input type="checkbox" id="showPercents" /> Показывать проценты</label>
      </div>
    </section>
  </main>

  <footer>
    <div>Время целей — Москва (UTC+3). Локальное: <span id="localTime" class="pulse"></span></div>
    <div>© 2025 Quantum UI</div>
  </footer>

  <script>
    // ====== ДАТЫ (MSK) ======
    function mskDate(year, monthIndex, day, hours = 0, minutes = 0, seconds = 0) {
      const utcTimestamp = Date.UTC(year, monthIndex, day, hours - 3, minutes, seconds);
      return new Date(utcTimestamp);
    }
    const START_POINT = mskDate(2025, 3, 23, 0, 0, 0); // 23.04.2025 00:00 МСК
    const TARGET_A   = mskDate(2026, 2, 1, 0, 0, 0);   // 01.03.2026 00:00 МСК
    const TARGET_B   = mskDate(2026, 3, 23, 0, 0, 0);  // 23.04.2026 00:00 МСК

    // ====== DOM ======
    const showMonthsEl   = document.getElementById('showMonths');
    const showSecondsEl  = document.getElementById('showSeconds');
    const showPercentsEl = document.getElementById('showPercents');
    const srLive         = document.getElementById('sr-live');
    const localTimeEl    = document.getElementById('localTime');
    const themeButton    = document.getElementById('themeToggle');

    const timers = {
      A: {
        target: TARGET_A,
        element: document.querySelector('[data-timer="A"]'),
        progressEl: document.querySelector('[data-progress="A"]'),
        progressPctEl: document.querySelector('[data-progress-pct="A"]')
      },
      B: {
        target: TARGET_B,
        element: document.querySelector('[data-timer="B"]'),
        progressEl: document.querySelector('[data-progress="B"]'),
        progressPctEl: document.querySelector('[data-progress-pct="B"]')
      }
    };

    // ====== ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ ======
    function diffBreakdown(from, to) {
      let delta = Math.max(to - from, 0);
      const second = 1000,
            minute = 60 * second,
            hour   = 60 * minute,
            day    = 24 * hour,
            month  = 30.4375 * day; // средняя длина месяца

      const months = Math.floor(delta / month); delta -= months * month;
      const days   = Math.floor(delta / day);   delta -= days * day;
      const hours  = Math.floor(delta / hour);  delta -= hours * hour;
      const mins   = Math.floor(delta / minute);delta -= mins * minute;
      const secs   = Math.floor(delta / second);
      return { months, days, hours, mins, secs };
    }

    function label(unit, value) {
      const forms = {
        months: ['месяц', 'месяца', 'месяцев'],
        days:   ['день', 'дня', 'дней'],
        hours:  ['час', 'часа', 'часов'],
        mins:   ['минута', 'минуты', 'минут'],
        secs:   ['секунда', 'секунды', 'секунд']
      };
      const f = forms[unit];
      if (!f) return unit;
      const n = Math.abs(value) % 100;
      const n1 = n % 10;
      if (n > 10 && n < 20) return f[2];
      if (n1 > 1 && n1 < 5) return f[1];
      if (n1 === 1) return f[0];
      return f[2];
    }

    // Улучшенная flip-анимация
    function animateDigits(el, newVal) {
      const numEl = el.querySelector('.num');
      const oldVal = numEl ? numEl.textContent : null;
      if (oldVal === String(newVal)) return;
      if (!numEl) return;

      numEl.style.transform = 'rotateX(90deg) scale(0.8)';
      numEl.style.opacity = '0';
      
      setTimeout(() => {
        numEl.textContent = newVal;
        numEl.style.transform = 'rotateX(0deg) scale(1)';
        numEl.style.opacity = '1';
      }, 300);
    }

    function renderTimer(container, diff) {
      const showMonths  = showMonthsEl.checked;
      const showSeconds = showSecondsEl.checked;
      const showPercents= showPercentsEl.checked;

      const segs = [];
      if (showMonths) segs.push(['months', diff.months]);
      segs.push(['days', diff.days], ['hours', diff.hours], ['mins', diff.mins]);
      if (showSeconds) segs.push(['secs', diff.secs]);

      if (container.children.length === segs.length || container.children.length === segs.length + 1) {
        let i = 0;
        for (; i < segs.length; i++) {
          const wrap = container.children[i];
          const unit = segs[i][0];
          const val  = segs[i][2] || segs[i][1];
          animateDigits(wrap, val);
          wrap.querySelector('.label').textContent = label(unit, val);
        }
        
        if (showPercents) {
          if (!container.querySelector('.percent')) {
            container.insertAdjacentHTML('beforeend', `<span class="percent"></span>`);
          }
        } else {
          const pctEl = container.querySelector('.percent');
          if (pctEl) pctEl.remove();
        }
      } else {
        const html = segs.map(([unit, val]) => `
          <span>
            <span class="num">${val}</span>
            <span class="label">${label(unit, val)}</span>
          </span>`).join('');
        container.innerHTML = html + (showPercents ? `<span class="percent"></span>` : '');
      }

      if (showPercents) {
        const target = container.dataset.timer === 'A' ? TARGET_A : TARGET_B;
        const totalSpan = target - START_POINT;
        const passed = Math.max(Date.now() - START_POINT.getTime(), 0);
        const pct = Math.min((passed / totalSpan) * 100, 100).toFixed(2);
        container.querySelector('.percent').textContent = pct + '%';
      }
    }

    function renderProgress(progressEl, progressPctEl, now, target) {
      const totalSpan = target - START_POINT;
      const passed = Math.max(now - START_POINT, 0);
      const pct = Math.min((passed / totalSpan) * 100, 100);
      progressEl.style.width = pct + '%';
      if (progressPctEl) progressPctEl.textContent = pct.toFixed(1) + '%';
    }

    let lastAnnounceMinute = null;
    function update() {
      const now = new Date();
      localTimeEl.textContent = now.toLocaleString('ru-RU', {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });

      Object.entries(timers).forEach(([key, cfg]) => {
        const diff = diffBreakdown(now, cfg.target);
        renderTimer(cfg.element, diff);
        renderProgress(cfg.progressEl, cfg.progressPctEl, now, cfg.target);
      });

      const curMinute = now.getMinutes();
      if (curMinute !== lastAnnounceMinute) {
        lastAnnounceMinute = curMinute;
        const aDiff = diffBreakdown(now, TARGET_A);
        const bDiff = diffBreakdown(now, TARGET_B);
        srLive.textContent = `До 1 марта 2026 осталось ${aDiff.months} ${label('months', aDiff.months)} ${aDiff.days} ${label('days', aDiff.days)}. До 23 апреля 2026 осталось ${bDiff.months} ${label('months', bDiff.months)} ${bDiff.days} ${label('days', bDiff.days)}.`;
      }

      requestAnimationFrame(update);
    }

    // ====== THEME TOGGLE ======
    function updateThemeIcon(isLight) {
      themeButton.innerHTML = isLight ? `
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      ` : `
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M12 4V2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M12 20V22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M5.63605 5.63605L4.22183 4.22183" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M18.364 18.364L19.7782 19.7782" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M4 12H2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M20 12H22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M5.63605 18.364L4.22183 19.7782" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M18.364 5.63605L19.7782 4.22183" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      `;
    }

    themeButton.addEventListener('click', () => {
      const isLight = document.documentElement.classList.toggle('light');
      localStorage.setItem('theme', isLight ? 'light' : 'dark');
      updateThemeIcon(isLight);
    });

    // Инициализация темы
    const savedTheme = localStorage.getItem('theme');
    const systemPrefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
    
    if (savedTheme === 'light' || (!savedTheme && systemPrefersLight)) {
      document.documentElement.classList.add('light');
      updateThemeIcon(true);
    } else {
      updateThemeIcon(false);
    }

    // Перерисовка при изменении настроек
    [showMonthsEl, showSecondsEl, showPercentsEl].forEach(el => el.addEventListener('change', () => {
      const now = new Date();
      Object.values(timers).forEach(cfg => {
        const diff = diffBreakdown(now, cfg.target);
        renderTimer(cfg.element, diff);
      });
    }));

    // Параллакс-эффект для фона
    document.addEventListener('mousemove', (e) => {
      const x = (e.clientX / window.innerWidth - 0.5) * 20;
      const y = (e.clientY / window.innerHeight - 0.5) * 20;
      document.querySelector('.quantum-bg').style.transform = `translate3d(${x}px, ${y}px, 0) scale(1.05)`;
    });

    requestAnimationFrame(update);
  </script>
</body>
</html>
