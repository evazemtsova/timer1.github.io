<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Двойной Таймер 2026: Маршрут к Целям (MSK)</title>
  <meta name="description" content="Футуристический двойной таймер с иммерсивным прогрессом и динамичным бордом. Отсчёт до 1 марта и 23 апреля 2026 по московскому времени." />
  
  <!-- Шрифты: Manrope + современный акцент -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;800&display=swap" rel="stylesheet">
  
  <style>
    /* ====== CSS RESET (минималистичный 2025) ====== */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { font-size: 16px; scroll-behavior: smooth; }
    body { min-height: 100vh; line-height: 1.5; font-smooth: always; -webkit-font-smoothing: antialiased; text-rendering: optimizeSpeed; }
    img, svg { display: block; max-width: 100%; }
    button, input { font: inherit; cursor: pointer; }

    /* ====== THEME TOKENS (Футуристическая палитра 2025) ====== */
    :root {
      --bg-1: #0a0a0e;
      --bg-2: rgba(20, 20, 25, 0.85);
      --fg-1: #e0e0e5;
      --fg-2: #a0a0a8;
      --accent-a: #7c3aed;
      --accent-b: #0d9488;
      --glow: #ffffff;
      --danger: #ef4444;
      --radius-lg: 1.75rem;
      --radius-sm: 0.875rem;
      --blur: 32px;
      --border-color: rgba(255,255,255,0.1);
      --font-sans: "Manrope", system-ui, sans-serif;
      --fs-xxl: clamp(3.5rem, 10vw, 7rem);
      --fs-xl: clamp(2rem, 6vw, 3.5rem);
      --fs-lg: clamp(1.5rem, 5vw, 2.5rem);
      --fs-md: 1.125rem;
      --fs-sm: 0.9375rem;
      --transition: 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .light {
      --bg-1: #f8f8fa;
      --bg-2: rgba(255,255,255,0.75);
      --fg-1: #0a0a0e;
      --fg-2: #606068;
      --border-color: rgba(0,0,0,0.1);
      --accent-a: #6d28d9;
      --accent-b: #0f766e;
    }

    body {
      font-family: var(--font-sans);
      color: var(--fg-1);
      background: var(--bg-1);
      position: relative;
      overflow-x: hidden;
    }

    .bg-gradient {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at 25% 15%, rgba(124,58,237,0.3), transparent 50%),
                  radial-gradient(circle at 75% 25%, rgba(13,148,136,0.28), transparent 55%),
                  radial-gradient(circle at 50% 85%, rgba(255,255,255,0.1), transparent 60%);
      filter: blur(100px);
      opacity: 0.75;
      animation: pulseBg 25s infinite alternate ease-in-out;
      pointer-events: none;
      z-index: 0;
    }
    @keyframes pulseBg {
      0% { transform: translate3d(-3%, -2%, 0) scale(1); opacity: 0.75; }
      100% { transform: translate3d(3%, 2%, 0) scale(1.08); opacity: 0.9; }
    }

    .grain {
      pointer-events: none;
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 400 400'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='400' height='400' filter='url(%23noise)' opacity='.18'/%3E%3C/svg%3E");
      opacity: 0.2;
      mix-blend-mode: overlay;
      z-index: 1;
    }

    header, footer {
      position: relative;
      z-index: 3;
      padding: 1.25rem clamp(1.25rem, 5vw, 2.5rem);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.25rem;
    }

    header {
      position: sticky;
      top: 0;
      backdrop-filter: blur(var(--blur));
      background: color-mix(in srgb, var(--bg-1) 75%, transparent);
      border-bottom: 1px solid var(--border-color);
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }

    main {
      position: relative;
      z-index: 2;
      width: 100%;
      max-width: 1280px;
      margin: 0 auto;
      padding: clamp(2rem, 5vw, 4rem) clamp(1.25rem, 5vw, 3rem) 5rem;
    }

    .title {
      font-size: var(--fs-xl);
      font-weight: 800;
      letter-spacing: -0.02em;
      background: linear-gradient(90deg, var(--accent-a), var(--accent-b));
      -webkit-background-clip: text;
      color: transparent;
    }
    .theme-toggle {
      border: none;
      background: transparent;
      color: var(--fg-1);
      font-size: 1.25rem;
      transition: transform 0.3s ease, color var(--transition);
    }
    .theme-toggle:hover { transform: scale(1.15) rotate(15deg); color: var(--accent-a); }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(100%, 540px), 1fr));
      gap: clamp(1.5rem, 4vw, 2.5rem);
    }

    .card {
      position: relative;
      backdrop-filter: blur(var(--blur));
      background: var(--bg-2);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      padding: clamp(1.5rem, 5vw, 3rem);
      box-shadow: 0 0 20px rgba(0,0,0,0.2), inset 0 0 10px rgba(255,255,255,0.05);
      overflow: hidden;
      transition: all var(--transition);
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 40px rgba(0,0,0,0.3), 0 0 0 2px var(--accent-a);
    }
    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 50% 0, rgba(255,255,255,0.08), transparent 80%);
      opacity: 0.4;
      pointer-events: none;
      transition: opacity var(--transition);
    }
    .card:hover::before { opacity: 0.6; }

    .card h2 {
      font-size: var(--fs-lg);
      margin-bottom: 1rem;
      font-weight: 600;
      letter-spacing: -0.015em;
    }
    .card h3 {
      font-size: var(--fs-md);
      color: var(--fg-2);
      margin-bottom: 1.25rem;
      font-weight: 300;
    }

    .timer-value {
      font-variant-numeric: tabular-nums;
      font-size: var(--fs-xxl);
      font-weight: 800;
      letter-spacing: -0.04em;
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem 1.5rem;
      line-height: 1;
    }
    .timer-value span {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      min-width: 6ch;
      perspective: 1200px;
      position: relative;
    }
    .timer-value .num {
      transition: transform 0.6s var(--transition);
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    .timer-value span .label {
      font-size: var(--fs-sm);
      color: var(--fg-2);
      margin-top: 0.5rem;
      font-weight: 300;
    }
    .accent-a .num { color: var(--accent-a); text-shadow: 0 0 8px var(--accent-a); }
    .accent-b .num { color: var(--accent-b); text-shadow: 0 0 8px var(--accent-b); }

    .percent {
      display: inline-flex;
      align-items: center;
      margin-left: 0.75rem;
      padding: 0.2rem 0.6rem;
      border-radius: 0.5rem;
      background: color-mix(in srgb, var(--fg-2) 15%, transparent);
      backdrop-filter: blur(12px);
      box-shadow: 0 0 10px rgba(var(--glow), 0.2);
      font-size: var(--fs-md);
      font-weight: 600;
    }

    .progress-wrap { margin-top: 2rem; display: flex; flex-direction: column; gap: 1.25rem; }
    .progress-row {
      display: grid;
      grid-template-columns: minmax(14ch, 260px) 1fr 6ch;
      gap: 1.25rem;
      align-items: center;
    }
    .progress-label { font-size: var(--fs-md); color: var(--fg-2); font-weight: 400; }
    .progressbar {
      width: 100%; height: 1rem; border-radius: 999px; position: relative;
      background: color-mix(in srgb, var(--fg-2) 18%, transparent);
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
    }
    .progressbar > div {
      height: 100%;
      transition: width 1.2s var(--transition);
      background: linear-gradient(90deg, var(--accent-a), color-mix(in srgb, var(--accent-a) 70%, var(--accent-b)));
      box-shadow: 0 0 15px var(--accent-a);
      position: relative;
    }
    .progressbar > div::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shine 2s infinite linear;
    }
    @keyframes shine {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    .progress-b { background: linear-gradient(90deg, var(--accent-b), color-mix(in srgb, var(--accent-b) 70%, var(--accent-a))); }
    .progress-b::after { background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); }
    .progress-percent { font-size: var(--fs-md); color: var(--fg-1); text-align: right; font-weight: 600; }

    .settings {
      display: flex; flex-wrap: wrap; gap: 1.5rem; margin-top: 1.5rem; font-size: var(--fs-md); color: var(--fg-2);
    }
    .settings label { cursor: pointer; display: flex; align-items: center; gap: 0.5rem; transition: color var(--transition); }
    .settings label:hover { color: var(--fg-1); }
    .settings input[type="checkbox"] {
      width: 1.125rem; height: 1.125rem; border-radius: 0.375rem; border: 1px solid var(--border-color);
      background: color-mix(in srgb, var(--bg-2) 85%, transparent);
      appearance: none; position: relative; transition: all var(--transition);
    }
    .settings input[type="checkbox"]:checked {
      background: var(--accent-a);
      border-color: var(--accent-a);
      box-shadow: 0 0 10px var(--accent-a);
    }
    .settings input[type="checkbox"]:checked::after {
      content: ""; position: absolute; inset: 0; background: url('data:image/svg+xml,%3Csvg viewBox="0 0 12 10" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M1 5l3 3 7-7" stroke="white" stroke-width="2" fill="none" stroke-linecap="round"/%3E%3C/svg%3E') center/80% 80% no-repeat;
    }

    footer {
      border-top: 1px solid var(--border-color);
      font-size: var(--fs-sm);
      color: var(--fg-2);
      font-weight: 300;
    }

    .visually-hidden {
      position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px,1px,1px,1px); white-space: nowrap;
    }

    .fade-in { opacity: 0; transform: translateY(20px) scale(0.98); animation: fadeIn 1s var(--transition) forwards; }
    @keyframes fadeIn { to { opacity: 1; transform: none; } }
  </style>
</head>
<body>
  <div class="bg-gradient"></div>
  <div class="grain"></div>

  <header>
    <div class="title">Двойной Таймер 2026 (MSK)</div>
    <button id="themeToggle" class="theme-toggle" aria-label="Переключить тему">🌌</button>
  </header>

  <main>
    <noscript>
      <p style="color:var(--danger)"><strong>JavaScript отключён.</strong> Таймеры статичны. Включите JS для динамики.</p>
    </noscript>

    <div id="sr-live" class="visually-hidden" aria-live="polite"></div>

    <section class="grid fade-in" id="timers">
      <article class="card" id="timerA" aria-labelledby="timerA-title">
        <h2 id="timerA-title">До 1 марта 2026 (MSK)</h2>
        <div class="timer-value accent-a" data-timer="A"></div>
      </article>

      <article class="card" id="timerB" aria-labelledby="timerB-title">
        <h2 id="timerB-title">До 23 апреля 2026 (MSK)</h2>
        <div class="timer-value accent-b" data-timer="B"></div>
      </article>
    </section>

    <section class="card fade-in" id="statusBoard" aria-labelledby="statusBoard-title" style="margin-top: clamp(2rem,5vw,4rem);">
      <h2 id="statusBoard-title">Прогресс: Путь к Целям</h2>
      <h3>От 23 апреля 2025 (MSK) до дат</h3>

      <div class="progress-wrap">
        <div class="progress-row">
          <div class="progress-label">К 1 марта 2026</div>
          <div class="progressbar"><div class="progress-a" style="width:0%" data-progress="A"></div></div>
          <div class="progress-percent" data-progress-pct="A">0%</div>
        </div>
        <div class="progress-row">
          <div class="progress-label">К 23 апреля 2026</div>
          <div class="progressbar"><div class="progress-b" style="width:0%" data-progress="B"></div></div>
          <div class="progress-percent" data-progress-pct="B">0%</div>
        </div>
      </div>
    </section>

    <section class="card fade-in" id="settings" aria-labelledby="settings-title" style="margin-top: clamp(2rem,5vw,4rem);">
      <h2 id="settings-title">Персонализация</h2>
      <div class="settings">
        <label><input type="checkbox" id="showMonths" checked /> Месяцы</label>
        <label><input type="checkbox" id="showSeconds" checked /> Секунды</label>
        <label><input type="checkbox" id="showPercents" /> Проценты</label>
      </div>
    </section>
  </main>

  <footer>
    <div>Время: Москва (UTC+3). Локально: <span id="localTime"></span></div>
    <div>© 2025 | Футуристический Дизайн</div>
  </footer>

  <script>
    function mskDate(year, monthIndex, day, hours = 0, minutes = 0, seconds = 0) {
      const utcTimestamp = Date.UTC(year, monthIndex, day, hours - 3, minutes, seconds);
      return new Date(utcTimestamp);
    }
    const START_POINT = mskDate(2025, 3, 23, 0, 0, 0);
    const TARGET_A   = mskDate(2026, 2, 1, 0, 0, 0);
    const TARGET_B   = mskDate(2026, 3, 23, 0, 0, 0);

    const showMonthsEl   = document.getElementById('showMonths');
    const showSecondsEl  = document.getElementById('showSeconds');
    const showPercentsEl = document.getElementById('showPercents');
    const srLive         = document.getElementById('sr-live');
    const localTimeEl    = document.getElementById('localTime');
    const themeButton    = document.getElementById('themeToggle');

    const timers = {
      A: {
        target: TARGET_A,
        element: document.querySelector('[data-timer="A"]'),
        progressEl: document.querySelector('[data-progress="A"]'),
        progressPctEl: document.querySelector('[data-progress-pct="A"]')
      },
      B: {
        target: TARGET_B,
        element: document.querySelector('[data-timer="B"]'),
        progressEl: document.querySelector('[data-progress="B"]'),
        progressPctEl: document.querySelector('[data-progress-pct="B"]')
      }
    };

    function diffBreakdown(from, to) {
      let delta = Math.max(to - from, 0);
      const second = 1000,
            minute = 60 * second,
            hour   = 60 * minute,
            day    = 24 * hour,
            month  = 30.4375 * day;

      const months = Math.floor(delta / month); delta -= months * month;
      const days   = Math.floor(delta / day);   delta -= days * day;
      const hours  = Math.floor(delta / hour);  delta -= hours * hour;
      const mins   = Math.floor(delta / minute);delta -= mins * minute;
      const secs   = Math.floor(delta / second);
      return { months, days, hours, mins, secs };
    }

    function label(unit, value) {
      const forms = {
        months: ['месяц', 'месяца', 'месяцев'],
        days:   ['день', 'дня', 'дней'],
        hours:  ['час', 'часа', 'часов'],
        mins:   ['минута', 'минуты', 'минут'],
        secs:   ['секунда', 'секунды', 'секунд']
      };
      const f = forms[unit];
      if (!f) return unit;
      const n = Math.abs(value) % 100;
      const n1 = n % 10;
      if (n > 10 && n < 20) return f[2];
      if (n1 > 1 && n1 < 5) return f[1];
      if (n1 === 1) return f[0];
      return f[2];
    }

    function animateDigits(el, newVal) {
      const numEl = el.querySelector('.num');
      const oldVal = numEl ? numEl.textContent : null;
      if (oldVal === String(newVal)) return;
      if (!numEl) return;

      numEl.style.transition = 'transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)';
      numEl.style.transform = 'rotateX(180deg) scale(0.8)';
      setTimeout(() => {
        numEl.textContent = newVal;
        numEl.style.transform = 'rotateX(0deg) scale(1)';
      }, 250);
    }

    function renderTimer(container, diff) {
      const showMonths  = showMonthsEl.checked;
      const showSeconds = showSecondsEl.checked;
      const showPercents= showPercentsEl.checked;

      const segs = [];
      if (showMonths) segs.push(['months', diff.months]);
      segs.push(['days', diff.days], ['hours', diff.hours], ['mins', diff.mins]);
      if (showSeconds) segs.push(['secs', diff.secs]);

      if (container.children.length === segs.length || container.children.length === segs.length + 1) {
        let i = 0;
        for (; i < segs.length; i++) {
          const wrap = container.children[i];
          const unit = segs[i][0];
          const val  = segs[i][1];
          animateDigits(wrap, val);
          wrap.querySelector('.label').textContent = label(unit, val);
        }
        if (showPercents) {
          if (!container.querySelector('.percent')) {
            container.insertAdjacentHTML('beforeend', `<span class="percent"></span>`);
          }
        } else {
          const pctEl = container.querySelector('.percent');
          if (pctEl) pctEl.remove();
        }
      } else {
        const html = segs.map(([unit, val]) => `
          <span>
            <span class="num">${val}</span>
            <span class="label">${label(unit, val)}</span>
          </span>`).join('');
        container.innerHTML = html + (showPercents ? `<span class="percent"></span>` : '');
      }

      if (showPercents) {
        const target = container.dataset.timer === 'A' ? TARGET_A : TARGET_B;
        const totalSpan = target - START_POINT;
        const passed = Math.max(Date.now() - START_POINT.getTime(), 0);
        const pct = Math.min((passed / totalSpan) * 100, 100).toFixed(2);
        container.querySelector('.percent').textContent = `${pct}%`;
      }
    }

    function renderProgress(progressEl, progressPctEl, now, target) {
      const totalSpan = target - START_POINT;
      const passed = Math.max(now - START_POINT, 0);
      const pct = Math.min((passed / totalSpan) * 100, 100);
      progressEl.style.width = pct + '%';
      if (progressPctEl) progressPctEl.textContent = pct.toFixed(1) + '%';
    }

    let lastAnnounceMinute = null;
    function update() {
      const now = new Date();
      localTimeEl.textContent = now.toLocaleString('ru-RU', { dateStyle: 'short', timeStyle: 'short' });

      Object.entries(timers).forEach(([key, cfg]) => {
        const diff = diffBreakdown(now, cfg.target);
        renderTimer(cfg.element, diff);
        renderProgress(cfg.progressEl, cfg.progressPctEl, now, cfg.target);
      });

      const curMinute = now.getMinutes();
      if (curMinute !== lastAnnounceMinute) {
        lastAnnounceMinute = curMinute;
        const aDiff = diffBreakdown(now, TARGET_A);
        const bDiff = diffBreakdown(now, TARGET_B);
        srLive.textContent = `До 1 марта 2026: ${aDiff.months} ${label('months', aDiff.months)}, ${aDiff.days} ${label('days', aDiff.days)}, ${aDiff.hours} ${label('hours', aDiff.hours)}. До 23 апреля 2026: ${bDiff.months} ${label('months', bDiff.months)}, ${bDiff.days} ${label('days', bDiff.days)}, ${bDiff.hours} ${label('hours', bDiff.hours)}.`;
      }

      requestAnimationFrame(update);
    }

    themeButton.addEventListener('click', () => {
      document.documentElement.classList.toggle('light');
    });

    [showMonthsEl, showSecondsEl, showPercentsEl].forEach(el => el.addEventListener('change', () => {
      const now = new Date();
      Object.values(timers).forEach(cfg => {
        const diff = diffBreakdown(now, cfg.target);
        renderTimer(cfg.element, diff);
      });
    }));

    requestAnimationFrame(update);
  </script>
</body>
</html>
